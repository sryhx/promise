<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        //all(与,只要有一个状态为rejected则返回rejected)
         /* var p1=Promise.resolve(1),
            p2=Promise.resolve(2),
            p3=Promise.reject(3);
            Promise.all([p1,p2,p3]).then((res)=>{
                console.log(res);
            }).catch((err)=>{
                console.log(err);
            }) */

           /*  let p1=new Promise((resolve)=>{
                setTimeout(()=>{
                    console.log('6s');
                    resolve(6);
                },6000)
            })
            let p10=new Promise((resolve)=>{
                setTimeout(()=>{
                    console.log('10s');
                    resolve(10);
                },10000)
            })
            let p5=new Promise((resolve)=>{
                setTimeout(()=>{
                    console.log('5s');
                    resolve(5);
                },5000)
            }) */
            /* race    all
            race谁先执行返回谁的状态和结果
             
           /*  Promise.race([p1,p10,p5]).then((res)=>{
                console.log(res);//5
                //5s 5  6s  10s 
             /* Promise.all([p1,p10,p5]).then((res)=>{
                console.log(res); 
                //5s  6s  10s  6,10,5     
            }) */


            //请求某个图片资源
            let requestImg = new Promise(function(resolve, reject){
                    var img = new Image();
                    img.onload = function(){
                        resolve(img);
                    }
                });
            //延时函数，用于给请求计时
            let timeOut = new Promise(function(resolve, reject){
                    setTimeout(function(){
                        reject('图片请求超时');
                    }, 5000);
                });

            Promise.race([requestImg, timeOut]).then((res)=>{
                console.log(res);
            }).catch((err)=>{
                console.log(err);
            });
    </script>
</body>
</html>